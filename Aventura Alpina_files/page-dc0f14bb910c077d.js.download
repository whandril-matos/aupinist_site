!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="62b18a81-2878-4c9e-959a-9bf33cedf107",e._sentryDebugIdIdentifier="sentry-dbid-62b18a81-2878-4c9e-959a-9bf33cedf107")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9964:function(e,t,l){Promise.resolve().then(l.bind(l,1218))},1218:function(e,t,l){"use strict";l.d(t,{default:function(){return eE}});var s,a,n=l(7437),i=l(2265),o=l(7138),r=l(3191),c=l(5913),d=l(6530),u=l(5524);let m=(0,l(8697).$4)("/collection"),h=async e=>m.post("/",{...e}),f=()=>(0,u.D)({mutationFn:h}),x=async e=>{e.collectionId&&m.put("/update-count",{...e})},g=()=>(0,u.D)({mutationFn:x}),p=async e=>m.put("/".concat(e.collectionId),{...e}),v=()=>(0,u.D)({mutationFn:p}),b=async e=>m.delete("/".concat(e)),w=()=>(0,u.D)({mutationFn:b});var y=l(803),j=l(5360),N=l(4937),k=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1 px-10",children:[(0,n.jsx)("span",{className:"text-white font-inter text-xs font-semibold text-center",children:"No items yet \uD83D\uDE22"}),(0,n.jsx)("span",{className:"text-white text-xs font-inter text-center",children:"Go to your favorite brand’s site and hover over product images to reveal Stylar’s try on button:"}),(0,n.jsxs)("div",{className:"w-16 h-6 bg-black/80 rounded-full px-[6px] py-1 flex items-center justify-center gap-[2px]",children:[(0,n.jsx)("img",{src:"/icons/magic.svg",alt:""}),(0,n.jsx)("span",{className:"text-white font-poppins text-[10px] font-semibold",children:"Try on"})]})]}),C=l(9993),_=l(1912),L=l(495),F=l(9573),I=l(7440),S=e=>{var t,l;let{segment:s,onDelete:a,onSelect:o,segmentImageURL:r,isSelected:c,isOriginalSegment:d}=e,[u,m]=(0,i.useState)({open:!1,id:""}),[h,f]=(0,i.useState)(!1);return(0,n.jsxs)("div",{className:"h-fit w-fit group relative",onMouseOver:()=>!h&&m({open:!0,id:s._id}),onMouseLeave:()=>{h||m({open:!1,id:""})},children:[(0,n.jsxs)("button",{onClick:()=>o(),className:"cursor-pointer w-fit h-fit px-1 pt-1 pb-1 gap-1 rounded-md overflow-hidden relative duration-200 ease-in-out ".concat(c?"bg-[#6117FF]":"bg-black/50 hover:bg-[#6117FF]/60"),children:[(0,n.jsx)("img",{src:r,alt:"",className:"h-[55px] w-[61px] object-cover m-auto bg-black rounded"}),(0,n.jsx)("span",{className:"text-white pt-1 text-[10px] max-w-[60px] text-center font-inter font-semibold text-ellipsis line-clamp-1 break-words ".concat(c?"opacity-100":"opacity-75"),children:s.brand||(null===(l=s.product)||void 0===l?void 0:null===(t=l.srcURL.split("www.")[1])||void 0===t?void 0:t.split(".")[0])||""})]},s.imageURL),!d&&(0,n.jsxs)(F.J2,{open:u.id===s._id&&h,onOpenChange:()=>{f(!h),setTimeout(()=>{h&&m({open:!h,id:""})},115)},children:[(0,n.jsx)(F.xo,{asChild:!0,children:(0,n.jsx)(L.z,{className:(0,I.cn)("rounded-full w-6 h-6 absolute bg-black -top-3 -right-3 p-0 items-center justify-center",u.open&&u.id===s._id?"flex":"hidden"),children:(0,n.jsx)(C.R,{className:"fill-secondary"})})}),(0,n.jsx)(F.yk,{className:"w-fit p-0 outline-none border-none rounded-lg",align:"end",children:(0,n.jsxs)(L.z,{onClick:()=>a(),className:"text-white bg-black hover:bg-black/90 text-[10px] font-semibold flex items-center gap-x-1",children:[(0,n.jsx)(_.Z,{className:"fill-red-500 h-5 w-5"}),"Remove from closet"]})})]})]},s._id||s.imageURL)},P=l(6311),E=l.n(P),R=l(8179),U=e=>{let{hidden:t,userData:l,tasks:s,activeCategory:a}=e,o=(0,r.NL)(),{activeCollection:u}=(0,c.K)(),{data:m,isFetching:h}=(0,j.Le)(),{logEvent:f}=(0,N.N)(),{resetSelectedSegments:x,selectedSegments:p,handleSelectSegment:v,segmentsLimit:b,addSegmentsLimit:w}=(0,d.J)(),C=!m,_=!m,{mutateAsync:L}=(0,j.sS)(),{mutateAsync:F}=g(),I=m?[...(null==l?void 0:l.activePhoto.segments)||[],...m].filter(e=>e.category===a):[],P=s.length>0||(a===y.F.TOP||a===y.F.BOTTOM)&&I.length>1||a===y.F.FULL&&I.length>0||C,U=async e=>{if(m)try{x((null==l?void 0:l.activePhoto._id)||""),await L(e,{onSuccess:async()=>{F({collectionId:null==u?void 0:u._id,count:-1}),o.refetchQueries({queryKey:["user-segments"]}),o.refetchQueries({queryKey:["get-user-collections"]})}})}catch(e){return}},z=()=>{(!E().sessionURL||"Must call LogRocket.init() before sessionURL becomes available."==E().sessionURL)&&(E().init("stylar13/stylar",{mergeIframes:!0,childDomains:["https://app.stylar.com"]}),(null==l?void 0:l.user)&&E().identify(l.user._id,{name:l.user.name}))},A=e=>{z(),f("Select Segment",{imageUrl:e.imageURL,productUrl:e.productURL,category:e.category}),v(e)};return(0,i.useEffect)(()=>{o.refetchQueries({queryKey:["user-segments"]})},[b]),P?(0,n.jsx)("div",{id:"scrollableDiv",className:"".concat(t?"h-0":"h-1/4"," duration-200 [&>div]:h-full"),children:(0,n.jsxs)(R.Z,{height:190,dataLength:I.length,next:()=>{w()},hasMore:!0,loader:(0,n.jsx)("div",{className:"h-[84px] w-[69px] flex items-center justify-center relative bottom-0 mx-auto left-0 right-0",children:h&&(0,n.jsx)("svg",{className:"animate-spin m-auto inset-0 absolute z-10",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})})}),style:{height:"100%"},className:"w-full\n      ".concat(t?"h-0 max-h-0 overflow-hidden p-0":"h-full ".concat(C||_?"overflow-hidden":"overflow-y-scroll"," px-3 gap-3 py-4")," duration-200 relative ease-in-out grid grid-cols-5 justify-center overflow-x-hidden no-scrollbar"),children:[s.map(e=>e.input.section===a&&(0,n.jsxs)("div",{className:"w-16 h-[52px] bg-white/20 flex relative items-center justify-center overflow-hidden rounded-md",children:[e.input.ref_image_url&&(0,n.jsx)("img",{src:e.input.ref_image_url,className:"h-full w-full object-cover m-auto opacity-50 "}),(0,n.jsx)("svg",{className:"animate-spin m-auto absolute z-10",width:"24",height:"24",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})})]},e._id)),I.map(e=>{var t,s;return(e.tryOnPhoto===(null==l?void 0:l.activePhoto._id)||!e.tryOnPhoto)&&(0,n.jsx)(S,{segment:e,segmentImageURL:(null==e?void 0:e.productImageURL)||(null==l?void 0:null===(t=l.activePhoto)||void 0===t?void 0:t.imageURL)||"",onDelete:()=>{e._id&&U(e._id)},onSelect:()=>{A(e)},isSelected:p[a].imageURL===e.imageURL,isOriginalSegment:!(null==m?void 0:null===(s=m.find(t=>t.imageURL===e.imageURL))||void 0===s?void 0:s._id)},e._id+e.imageURL)}),(C||_)&&(0,n.jsx)("div",{className:"w-full h-full absolute inset-0 m-0 bg-black/50 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"animate-spin m-auto",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})})})]})}):!t&&(0,n.jsx)("div",{className:"w-full h-1/4 flex items-center justify-center",children:(0,n.jsx)(k,{})})},z=l(4865),A=l(1325),D=l(6061),Z=l(7564),M=l(5231),O=l(6893),T=l(5345),K=l(4206),B=e=>{let{eta:t,startedAt:l,imageURL:s,currentTask:a,totalTasks:i,fetchingNewSegment:o}=e;return(0,n.jsxs)("div",{className:"bg-[#2a2a2a]/75 absolute top-3 left-2 z-50 rounded-full my-auto h-8 w-[180px] pl-2 flex items-center gap-2 overflow-hidden",children:[t&&l&&(0,n.jsx)("div",{className:"h-full absolute left-0 top-0 bottom-0 bg-[#6117FF] z-10",style:{width:"".concat((0,K.T)(l,t),"%"),transition:"all 1000ms"}}),(0,n.jsxs)("div",{className:"relative flex items-center justify-center h-6 w-6 rounded-full z-20",children:[a?(0,n.jsx)("img",{src:s,alt:"",className:"h-full w-full rounded-full z-20 object-contain bg-white"}):(0,n.jsx)("div",{className:"h-full w-full rounded-full z-20 object-contain bg-transparent"}),!a&&(0,n.jsx)("svg",{className:"h-full w-full animate-spin m-auto absolute inset-0 z-30 bg-black/30",width:"16",height:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})})]}),a?(0,n.jsxs)("span",{className:"text-white font-poppins font-semibold text-[10px] z-20",children:["Generating ",i," ",i>1?"items":"item"]}):(0,n.jsxs)(n.Fragment,{children:[o&&(0,n.jsx)("span",{className:"text-white font-poppins font-semibold text-[10px] z-20",children:"Dressing you up!"}),!o&&(0,n.jsx)("span",{className:"text-white font-poppins font-semibold text-[10px] z-20",children:"Hang tight! \uD83D\uDE4F"}),!o&&(0,n.jsxs)("div",{className:"z-20 ml-auto pr-3 relative group flex items-center",children:[(0,n.jsx)("span",{className:" cursor-default text-white opacity-50 font-poppins font-semibold text-[10px] z-20",children:"More info"}),(0,n.jsx)("div",{className:"z-50 p-4 w-[90%] hidden group-hover:block group-hover:fixed left-0 right-0 top-12 m-auto bg-[rgb(21,21,23)]/80 rounded-2xl",children:(0,n.jsx)("span",{className:"text-white font-medium font-inter text-sm",children:"It’s a party! Our servers are getting a lot of love and are a bit overwhelmed. Please bear with us for a few moments and we’ll get to you shortly."})})]})]})]})},q=l(1553),G=l(6376),Q=l(3365),V=l(2829),J=l(1649),W=l(7818),Y=l(4800);let H=(0,W.default)(()=>Promise.all([l.e(226),l.e(925)]).then(l.bind(l,6925)),{loadableGenerated:{webpack:()=>[6925]},ssr:!1});(s=a||(a={}))[s.COLLECTION=0]="COLLECTION",s[s.LOOKBOOK=1]="LOOKBOOK",s[s.IMAGE=2]="IMAGE",s[s.GIF=3]="GIF";var $=e=>{var t,l,s;let{visible:a,onClose:o}=e,{selectedSegments:r,mergedImage:u}=(0,d.J)(),[m,h]=(0,i.useState)(!1),{activeCollection:f}=(0,c.K)(),{logEvent:x}=(0,N.N)(),{createCollection:g,createSharedCollection:p}=(0,J.a)(),{data:v}=(0,M.tZ)(),{data:b}=(0,j.Le)(),[w,y]=(0,i.useState)(0),[k,C]=(0,i.useState)(!1),_=b?[...(null==v?void 0:v.activePhoto.segments)||[],...b]:[],L=async()=>{try{if(h(!0),null==f?void 0:f._id){await p(null==f?void 0:f._id);let e="".concat(window.location.origin,"/collection/").concat(null==f?void 0:f._id,"/").concat(null==v?void 0:v.activePhoto._id);await navigator.clipboard.writeText(e),x("Share outfit"),C(!0)}}catch(e){console.log(e)}finally{h(!1)}},F=async()=>{try{h(!0);let e=Object.values(r).filter(e=>{var t;return!!(null===(t=e.product)||void 0===t?void 0:t._id)}).map(e=>{var t;return{_id:(null===(t=e.product)||void 0===t?void 0:t._id)||""}}),t={shared:{tryOnPhoto:{_id:null==v?void 0:v.activePhoto._id,imageURL:null==v?void 0:v.activePhoto.imageURL},name:null==v?void 0:v.user.name}},l=async()=>{let{data:l}=await g({name:"SS24",scope:t,products:e}),s="".concat(window.location.origin,"/lookbook/").concat(l._id,"/").concat(null==v?void 0:v.activePhoto._id);return console.log("copy-link",s),new Blob([s],{type:"text/plain"})},s=new ClipboardItem({"text/plain":l()});x("Share outfit"),navigator.clipboard.write([s]).then(()=>{console.log("Copy to clipboard successfully."),C(!0)}).catch(e=>{console.log("Copy to clipboard unsuccessfully.",e)})}catch(e){console.log(e)}finally{h(!1)}};return(0,i.useEffect)(()=>{(null==f?void 0:f._id)?y(0):y(1)},[null==f?void 0:f._id]),(0,i.useEffect)(()=>{C(!1)},[w]),a&&(0,n.jsxs)("div",{className:"bg-black h-full inset-0 w-full flex flex-col absolute z-[70]",children:[(0,n.jsxs)("div",{className:"w-full bg-[#151517] flex items-center justify-center z-[70]",children:[(0,n.jsx)("button",{onClick:()=>{o(),C(!1)},className:"absolute top-5 left-4",children:(0,n.jsx)("img",{src:"/icons/chevron-left.svg",alt:""})}),(0,n.jsx)("span",{className:"font-poppins text-white font-medium text-sm text-center w-full pt-4",children:"Share as"})]}),(0,n.jsxs)(z.Z.Provider,{centered:!0,children:[(null==f?void 0:f._id)?(0,n.jsx)(z.Z.Item,{active:w,label:"Collection",value:0,onSelect:y}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(z.Z.Item,{active:w,label:"Lookbook",value:1,onSelect:y}),(0,n.jsx)(z.Z.Item,{active:w,label:"Image",value:2,onSelect:y}),(0,n.jsx)(z.Z.Item,{active:w,label:"GIF",value:3,onSelect:y})]}),0===w&&(0,n.jsxs)("div",{className:"flex px-10 bg-black pt-6 w-full h-full flex-col items-center",children:[(0,n.jsx)(Y.Z,{collectionName:(null==f?void 0:f.name)||"",mergedImage:u,segments:_||[],userImage:(null==v?void 0:v.activePhoto.imageURL)||"",userName:(null==v?void 0:v.user.name)||""}),(0,n.jsx)("button",{disabled:k||m,onClick:()=>L(),className:"absolute right-0 left-0 m-auto bottom-9 z-50 w-12 h-12 bg-[#7000FF] rounded-full disabled:opacity-60 opacity-100",children:m?(0,n.jsx)("svg",{className:"animate-spin m-auto ",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})}):(0,n.jsx)(Q.O,{className:"fill-secondary w-8 h-8 m-auto"})}),(0,n.jsx)("span",{className:"absolute font-inter text-white right-0 left-0 font-small text-xs text-center bottom-4",children:k?"Link Copied":"Copy link"})]}),1===w&&(0,n.jsxs)("div",{className:"flex px-20 bg-black pt-4",children:[(0,n.jsx)(G.Z,{mergedImage:u,selectedSegments:r}),(0,n.jsx)("button",{disabled:k||m,onClick:()=>F(),className:"absolute right-0 left-0 m-auto bottom-9 z-50 w-12 h-12 bg-[#7000FF] rounded-full disabled:opacity-60 opacity-100",children:m?(0,n.jsx)("svg",{className:"animate-spin m-auto ",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})}):(0,n.jsx)(Q.O,{className:"fill-secondary w-8 h-8 m-auto"})}),(0,n.jsx)("span",{className:"absolute font-inter text-white right-0 left-0 font-small text-xs text-center bottom-4",children:k?"Link Copied":"Copy link"})]}),2===w&&(0,n.jsxs)("div",{className:"flex px-20 bg-black pt-4",children:[(0,n.jsx)("img",{src:u,alt:"",className:"z-40 h-full w-full object-contain"}),(0,n.jsx)("a",{download:"stylar.png",onClick:()=>{x("Download outfit")},href:u,className:"absolute right-0 left-0 m-auto bottom-9 z-50 w-12 h-12 bg-[#7000FF] rounded-full pt-2",children:(0,n.jsx)(V._,{className:"fill-secondary w-8 h-8 m-auto"})}),(0,n.jsx)("span",{className:"absolute font-inter text-white right-0 left-0 font-small text-xs text-center bottom-4",children:"Save Image"})]}),3===w&&(0,n.jsx)("div",{className:"flex px-20 bg-black pt-4",children:(0,n.jsx)(H,{userImageUrl:(null==v?void 0:v.activePhoto.imageURL)||"",topImageUrl:(null===(t=r.full)||void 0===t?void 0:t.imageURL)||(null===(l=r.top)||void 0===l?void 0:l.imageURL),bottomImageUrl:null===(s=r.bottom)||void 0===s?void 0:s.imageURL})})]})},X=l(1107),ee=l(9051);function et(e){let{className:t}=e;return(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,n.jsx)("g",{clipPath:"url(#clip0_7_20)",children:(0,n.jsx)("path",{d:"M7.41 8.59L12 13.17L16.59 8.59L18 10L12 16L6 10L7.41 8.59Z"})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_7_20",children:(0,n.jsx)("rect",{width:"24",height:"24"})})})]})}var el=l(8484);let es=i.forwardRef((e,t)=>{let{className:l,orientation:s="horizontal",decorative:a=!0,...i}=e;return(0,n.jsx)(el.f,{ref:t,decorative:a,orientation:s,className:(0,I.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",l),...i})});function ea(e){let{className:t}=e;return(0,n.jsx)("svg",{width:"11",height:"16",viewBox:"0 0 11 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:(0,n.jsx)("path",{id:"CaratLeft",fillRule:"evenodd",clipRule:"evenodd",d:"M10.0809 0.390524C10.6015 0.911223 10.6015 1.75544 10.0809 2.27614L4.35699 8L10.0808 13.7239C10.6015 14.2446 10.6015 15.0888 10.0809 15.6095C9.56015 16.1302 8.71593 16.1302 8.19523 15.6095L0.585758 8L8.19523 0.390524C8.71593 -0.130175 9.56015 -0.130175 10.0809 0.390524Z"})})}es.displayName=el.f.displayName;var en=function(e){let{className:t}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,n.jsx)("path",{d:"M3 6h18"}),(0,n.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,n.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),(0,n.jsx)("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),(0,n.jsx)("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]})},ei=l(9772),eo=l(9343),er=l(1014),ec=l(6661);let ed=i.forwardRef((e,t)=>{let{className:l,type:s,...a}=e;return(0,n.jsx)("input",{type:s,className:(0,I.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",l),ref:t,...a})});ed.displayName="Input";var eu=function(e){let{className:t}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,n.jsx)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),(0,n.jsx)("path",{d:"m15 5 4 4"})]})};let em=ei.z.object({lookbookUpdateName:ei.z.string().min(1,{message:"Minimum of 1 characters or more"})}),eh=(0,i.forwardRef)((e,t)=>{let{collectionId:l,collectionName:s,setIsEditingCollection:a}=e,{mutateAsync:o}=v(),d=(0,r.NL)(),{activeCollection:u,handleActiveCollection:m}=(0,c.K)(),h=(0,eo.cI)({resolver:(0,er.F)(em),defaultValues:{lookbookUpdateName:s}});async function f(e){try{await o({collectionId:l,name:e.lookbookUpdateName}),a({collectionId:"",isEditing:!1,collectionImageUrl:"",collectionName:""}),u&&m(null==u?void 0:u._id),d.refetchQueries({queryKey:["get-user-collections"]})}catch(e){return}}return(0,i.useImperativeHandle)(t,()=>({submit:()=>f(h.getValues())})),(0,n.jsx)(ec.l0,{...h,children:(0,n.jsx)("form",{onSubmit:h.handleSubmit(f),className:"w-full space-y-6",children:(0,n.jsx)(ec.Wi,{control:h.control,name:"lookbookUpdateName",render:e=>{let{field:t}=e;return(0,n.jsxs)(ec.xJ,{className:"w-full space-y-0",children:[(0,n.jsx)(ec.NI,{children:(0,n.jsx)(ed,{placeholder:"My Lookbook",autoFocus:!0,className:"outline-none ring-0 p-0 text-secondary border-none focus-visible:ring-0 focus-visible:border-none focus-visible:outline-none mt-0 placeholder:text-gray-400",...t})}),(0,n.jsx)(ec.zG,{})]})}})})})});eh.displayName="EditCollection";var ef=l(6538);let ex=ef.fC,eg=ef.xz,ep=ef.h_,ev=i.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,n.jsx)(ef.aV,{className:(0,I.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",l),...s,ref:t})});ev.displayName=ef.aV.displayName;let eb=i.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,n.jsxs)(ep,{children:[(0,n.jsx)(ev,{onClick:e=>{e.preventDefault(),e.stopPropagation()}}),(0,n.jsx)(ef.VY,{ref:t,className:(0,I.cn)("fixed left-[50%] top-[50%] z-[999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",l),...s})]})});eb.displayName=ef.VY.displayName;let ew=e=>{let{className:t,...l}=e;return(0,n.jsx)("div",{className:(0,I.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...l})};ew.displayName="AlertDialogHeader";let ey=e=>{let{className:t,...l}=e;return(0,n.jsx)("div",{className:(0,I.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...l})};ey.displayName="AlertDialogFooter";let ej=i.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,n.jsx)(ef.Dx,{ref:t,className:(0,I.cn)("text-lg font-semibold",l),...s})});ej.displayName=ef.Dx.displayName;let eN=i.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,n.jsx)(ef.dk,{ref:t,className:(0,I.cn)("text-sm text-muted-foreground",l),...s})});eN.displayName=ef.dk.displayName;let ek=i.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,n.jsx)(ef.aU,{ref:t,className:(0,I.cn)((0,L.d)(),l),...s})});ek.displayName=ef.aU.displayName;let eC=i.forwardRef((e,t)=>{let{className:l,...s}=e;return(0,n.jsx)(ef.$j,{ref:t,className:(0,I.cn)((0,L.d)({variant:"outline"}),"mt-2 sm:mt-0",l),...s})});eC.displayName=ef.$j.displayName;var e_=l(1591);let eL=ei.z.object({lookbookName:ei.z.string().min(1,{message:"Minimum of 1 characters or more"})});var eF=e=>{var t,l,s,a;let{hidden:o}=e,u=new BroadcastChannel("collection_channel"),m=(0,r.NL)(),[h,x]=(0,i.useState)(!1),{activeCollection:g,handleActiveCollection:p}=(0,c.K)(),{resetSelectedSegments:v}=(0,d.J)(),{data:b}=(0,e_.i7)(),{data:y}=(0,M.tZ)(),{data:N}=(0,j.PK)(),k=null==N?void 0:N.filter(e=>e.tryOnPhoto===(null==y?void 0:y.activePhoto._id)),{mutateAsync:C}=f(),{mutateAsync:_,isPending:I}=w(),S=(0,eo.cI)({resolver:(0,er.F)(eL),defaultValues:{lookbookName:""}}),[P,E]=(0,i.useState)(!1),[R,U]=(0,i.useState)(!1),[z,A]=(0,i.useState)(!1),[D,Z]=(0,i.useState)(""),[O,T]=(0,i.useState)({collectionId:"",collectionName:"",isEditing:!1,collectionImageUrl:""}),[K,B]=(0,i.useState)(!1),q=(0,i.useRef)();async function G(e){y&&(x(!0),await C({name:e.lookbookName,user:(null==y?void 0:y.user._id)||""},{onSuccess:async e=>{v((null==y?void 0:y.activePhoto._id)||"");let t=null==e?void 0:e.data._id;await m.refetchQueries({queryKey:["get-user-collections"]}),p(t),u.postMessage(t),U(!1),x(!1),S.reset()}}))}let Q=async e=>{await _(e,{onSettled:async()=>{v((null==y?void 0:y.activePhoto._id)||""),p(""),await m.refetchQueries({queryKey:["get-user-collections"]}),await m.refetchQueries({queryKey:["user-segments"]}),A(!1)}})},V=async e=>{e?p(e):p(""),v((null==y?void 0:y.activePhoto._id)||""),E(!1)};return!o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.J2,{open:P,onOpenChange:()=>{A(!1),E(!P),S.reset(),new Promise(e=>{setTimeout(()=>{e(U(!1))},100)})},children:[(0,n.jsx)(F.xo,{asChild:!0,children:(0,n.jsx)("div",{className:"w-full px-2 pt-1 bg-[#151517] z-[60]",children:(0,n.jsxs)(L.z,{size:"sm",variant:"outline",className:"flex w-full bg-white/10 border-[#282828] hover:bg-black items-center text-white hover:text-white text-xs gap-x-2 rounded-full font-semibold justify-between cursor-pointer ",children:[(null==g?void 0:g.name)?(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"opacity-50",children:"Collection "}),null==g?void 0:g.name]}):"All items",(0,n.jsx)(et,{className:"fill-secondary"})]})})}),(0,n.jsxs)(F.yk,{align:"center",sticky:"always",side:"top",className:"w-[100dvw] p-0 h-[50dvh] flex flex-col overflow-hidden bg-[#282828] outline-none border-none text-secondary",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[!R&&!O.isEditing&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"font-bold leading-none text-sm",children:"Select a collection"}),(0,n.jsx)(L.z,{className:"bg-[#6117FF] text-white rounded-full hover:bg-[#6117FF]/90",size:"sm",onClick:()=>U(!0),children:"Create a new collection"})]}),(R||O.isEditing)&&(0,n.jsxs)("div",{className:"w-full text-center flex items-center justify-between py-[.5625rem]",children:[(0,n.jsx)("button",{onClick:()=>{S.reset(),U(!1),T({collectionId:"",collectionImageUrl:"",collectionName:"",isEditing:!1})},children:(0,n.jsx)(ea,{className:"fill-secondary h-3 w-3"})}),(0,n.jsx)("h4",{className:"leading-none text-sm w-full font-bold",children:O.isEditing?"Edit collection":"Give your collection a name"})]})]}),(0,n.jsx)(es,{className:"bg-white/10"}),(R||O.isEditing)&&(0,n.jsxs)("div",{className:"flex items-center gap-4 py-2 bg-[#6117FF] px-4",children:[(0,n.jsx)("div",{className:"relative w-12 p-1 flex items-center justify-center bg-white/10 rounded-lg border-[1px] border-white/20",children:(0,n.jsx)("img",{src:(null==b?void 0:null===(t=b.find(e=>e._id===O.collectionId))||void 0===t?void 0:t.imageURL)||(null==O?void 0:O.collectionImageUrl)||"/icons/hanger.png",alt:"Lookbook",className:"opacity-50 w-[75%] m-auto"})}),(0,n.jsxs)("div",{children:[O.isEditing?(0,n.jsx)(eh,{ref:q,collectionId:O.collectionId,collectionName:O.collectionName,setIsEditingCollection:T}):(0,n.jsx)(ec.l0,{...S,children:(0,n.jsx)("form",{onSubmit:S.handleSubmit(G),className:"w-full space-y-6",children:(0,n.jsx)(ec.Wi,{control:S.control,name:"lookbookName",render:e=>{let{field:t}=e;return(0,n.jsxs)(ec.xJ,{className:"w-full space-y-0",children:[(0,n.jsx)(ec.NI,{children:(0,n.jsx)(ed,{placeholder:"My Collection",autoFocus:!0,className:"outline-none ring-0 p-0 text-secondary border-none focus-visible:ring-0 focus-visible:border-none focus-visible:outline-none mt-0 placeholder:text-gray-400",...t})}),(0,n.jsx)(ec.zG,{})]})}})})}),!O.isEditing&&(0,n.jsx)("p",{className:"text-xs text-white",children:"0 items"})]})]}),(0,n.jsxs)("div",{className:"overflow-y-scroll flex-1 py-0.5 flex flex-col",children:[(0,n.jsx)("div",{className:"py-2 hover:bg-black px-4 cursor-pointer flex items-center justify-between",tabIndex:0,onClick:()=>V(void 0),children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"relative w-12 h-12 overflow-hidden",children:(0,n.jsx)("img",{src:(null==k?void 0:null===(s=k[0])||void 0===s?void 0:null===(l=s.product)||void 0===l?void 0:l.imageURLs[0])||"/icons/collection-placeholder.png",alt:"Lookbook",className:"rounded-lg h-full w-full object-cover"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"font-semibold text-sm",children:"All items"}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:[null==k?void 0:k.length," items"]})]})]})}),null==b?void 0:null===(a=b.filter(e=>!O.isEditing||O.isEditing&&e._id!==O.collectionId))||void 0===a?void 0:a.map(e=>{var t;return(0,n.jsxs)("div",{className:"py-2 hover:bg-black px-4 h-fit cursor-pointer flex items-center justify-between group",tabIndex:0,onClick:()=>V(e._id),children:[(0,n.jsxs)("div",{className:"flex items-center gap-4 cursor-pointer",children:[(0,n.jsx)("div",{className:"relative w-12 h-12",children:e.products.length?(0,n.jsx)("img",{src:null===(t=e.products[e.products.length-1])||void 0===t?void 0:t.imageURLs[0],alt:"Lookbook",className:"rounded-lg h-full w-full object-cover"}):(0,n.jsx)("img",{src:"/icons/collection-placeholder.png",className:"rounded-lg h-full w-full bg-black"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h5",{className:"font-semibold text-sm text-white",children:e.name}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:[e.productsCount," items"]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsxs)(ex,{open:z,onOpenChange:()=>{A(!z)},children:[(0,n.jsx)(eg,{asChild:!0,className:"self-center group-hover:block hidden",onClick:e=>{e.stopPropagation()},children:(0,n.jsx)("button",{onClick:()=>{A(!0),Z(e._id)},children:(0,n.jsx)(en,{className:"h-4 w-4 hover:text-red-500 duration-200"})})}),(0,n.jsxs)(eb,{onClick:e=>{e.stopPropagation()},children:[(0,n.jsxs)(ew,{children:[(0,n.jsx)(ej,{children:"Are you absolutely sure?"}),(0,n.jsx)(eN,{children:"This will permanently delete all the items in this collection from your closet. It cannot be undone."})]}),(0,n.jsxs)(ey,{children:[(0,n.jsx)(eC,{disabled:I,onClick:e=>{e.stopPropagation(),A(!1)},children:"Cancel"}),(0,n.jsx)(ek,{className:"bg-black hover:bg-black",disabled:I,onClick:e=>{e.stopPropagation(),Q(D)},children:"Continue"})]})]})]}),(0,n.jsx)("div",{className:"self-center group-hover:block hidden",onClick:t=>{var l;t.preventDefault(),t.stopPropagation(),T({isEditing:!0,collectionId:e._id,collectionName:e.name,collectionImageUrl:(null===(l=e.products[0])||void 0===l?void 0:l.imageURLs[0])||""})},children:(0,n.jsx)(eu,{className:"h-4 w-4 text-gray-500 hover:text-secondary duration-200"})})]})]},e._id)})]}),R&&(0,n.jsx)("div",{className:"rounded-lg w-full p-4 bg-[#282828] border-t border-white/10",children:(0,n.jsx)(L.z,{disabled:h,className:"bg-[#6117FF] text-white rounded-full hover:bg-[#6117FF]/90 w-full disabled:opacity-50",size:"sm",onClick:S.handleSubmit(G),children:"Create"})}),O.isEditing&&(0,n.jsx)("div",{className:"rounded-lg w-full p-4 bg-[#282828] border-t border-white/10",children:(0,n.jsx)(L.z,{disabled:K,className:"bg-[#6117FF] text-white rounded-full hover:bg-[#6117FF]/90 w-full disabled:opacity-50",size:"sm",onClick:async()=>{var e;B(!0),await (null===(e=q.current)||void 0===e?void 0:e.submit()),B(!1)},children:K?(0,n.jsx)("svg",{className:"animate-spin m-auto ",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})}):"Confirm"})})]})]}),P&&(0,n.jsx)("div",{className:"absolute h-screen w-screen bg-black/80 z-50"})]})},eI=l(7432),eS=l(6321),eP=l(7352);function eE(){var e,t,l;let s=(0,r.NL)(),{handleSelectSegment:a,section:u,selectedSegments:m,handleSection:h}=(0,d.J)(),{activeCollection:f}=(0,c.K)(),{handleActivatePhoto:x}=(0,eP.Z)(),{openModal:g,closeModal:p}=(0,eI.d)(),[v,b]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!1),[k,C]=(0,i.useState)(!1);new BroadcastChannel("extension_broadcast").onmessage=e=>{"Credit limit exceeded"===e.data&&g((0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5 ",children:[(0,n.jsx)("span",{className:"text-white font-extrabold text-sm text-center",children:"Credit limit exceeded"}),(0,n.jsx)("span",{className:"text-white text-sm text-center",children:"You have exceeded the daily try on limit for Basic Accounts. Please come back tomorrow or upgrade to Premium!"}),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,n.jsx)("button",{onClick:()=>{b(!0),p()},className:"text-white disabled:opacity-50 font-semibold bg-[#6117FF] rounded-full w-full h-12 ",children:"Enter Promo Code"}),(0,n.jsx)("button",{onClick:p,className:"text-white disabled:opacity-50 font-semibold bg-black rounded-full w-full h-12 ",children:"Close"})]})]}))};let{data:_}=(0,M.tZ)(),{logEvent:L}=(0,N.N)(),{data:F}=(0,O.r)(),S=(null==F?void 0:F.filter(e=>e.status===Z.h.STARTED))||[],P=(null==F?void 0:F.filter(e=>e.status===Z.h.QUEUED))||[],E=(0,i.useRef)([]),R=(0,i.useRef)(null),K=S&&P?[...S,...P].filter(e=>"copy_outfit"===e.type):[],G=K.find(e=>"started"===e.status),[Q,V]=(0,i.useState)(!1),[J,W]=(0,i.useState)(!1),Y=Object.values(m).filter(e=>!!e.productImageURL).length>0||(null==f?void 0:f._id),{getUserSegments:H}=(0,T.k)();(0,i.useEffect)(()=>{if(!F||(null==F?void 0:F.length)===0)return;let e=(null==F?void 0:F.filter(e=>[Z.h.FAILED,Z.h.REJECTED].includes(e.status)))||[];if(!R.current&&e){R.current=[...e];return}R.current&&e&&R.current.length!==e.length&&(g((0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-5 h-[160px]",children:[(0,n.jsx)("span",{className:"text-white font-extrabold text-sm text-center",children:"Error"}),(0,n.jsx)("span",{className:"text-white text-sm text-center",children:"Failed to generate image. Please try again later."}),(0,n.jsx)("button",{onClick:p,className:"text-white disabled:opacity-50 font-semibold bg-black rounded-full w-full h-12 ",children:"Continue"})]})),R.current=[...e])},[F]);let et=async()=>{try{if(!F||0===F.length)return;let e=F.filter(e=>e.status===Z.h.SUCCEEDED&&"copy_outfit"===e.type);if(e.length>0&&E.current.length!==e.length){if(C(!0),0===E.current.length){E.current=[...e];return}E.current=[...e];let t=E.current[E.current.length-1];if((null==t?void 0:t.output)&&t.input.tryon_photo_id===(null==_?void 0:_.activePhoto._id)){let e=t.output.segments[0];if(e){h(e.category);let{data:t}=await H(null==f?void 0:f._id,50),l=t.find(t=>t.imageURL===e.imageURL);l&&a(l),await Promise.all([s.refetchQueries({queryKey:["get-user-collections"]}),s.refetchQueries({queryKey:["user-segments"]})])}}}}catch(e){console.error("Error handling task finish:",e)}finally{C(!1)}};return(0,i.useEffect)(()=>{et()},[F,null==_?void 0:null===(e=_.activePhoto)||void 0===e?void 0:e.imageURL,null==f?void 0:f._id]),(0,i.useEffect)(()=>{try{s.refetchQueries({queryKey:["user-segments"]}),s.refetchQueries({queryKey:["get-user-collections"]})}catch(e){console.log(e)}},[E.current.length,null==_?void 0:null===(t=_.user)||void 0===t?void 0:t._id]),(0,i.useEffect)(()=>{if(null==_?void 0:_.activePhoto.avatarGenerated){var e;j(!0);let t=null===(e=_.user.tryOnPhotos)||void 0===e?void 0:e.findLast(e=>!e.avatarGenerated);t&&(x(_.user._id,null==t?void 0:t._id),j(!0))}},[null==_?void 0:_.activePhoto.avatarGenerated]),(0,n.jsxs)("div",{className:"w-full h-full",children:[!Q&&(K.length>0||k)&&(0,n.jsx)(B,{imageURL:(null==G?void 0:G.input.ref_image_url)||(null===(l=K[0])||void 0===l?void 0:l.input.ref_image_url)||"",fetchingNewSegment:k,totalTasks:K.length,currentTask:!!G,startedAt:null==G?void 0:G.startedAt,eta:null==G?void 0:G.eta}),!Q&&(0,n.jsx)(o.default,{href:"/profile",className:"absolute h-8 w-8 top-3 right-14 bg-[#000]/50 hover:bg-[#000]/75 duration-200 backdrop-blur-sm rounded-full flex items-center justify-center z-50",children:(0,n.jsx)("img",{src:"/icons/user.svg",alt:""})}),(0,n.jsxs)("div",{className:" ".concat(Q?"h-full":"h-[calc(100dvh)] mt-auto"," bg-[#222] w-full overflow-hidden flex flex-col"),children:[(0,n.jsxs)("div",{className:"relative w-full flex flex-col flex-1 overflow-hidden ".concat(Q?"h-full":"h-[1/3]"),children:[!w&&(0,n.jsx)(A.Z,{selectedSegments:m,userImage:(null==_?void 0:_.activePhoto.imageURL)||""}),(0,n.jsxs)("div",{className:"absolute right-2 bottom-2 flex flex-col items-center justify-center gap-1 z-40",children:[(0,n.jsx)(D.Z,{segments:Object.values(m)}),(0,n.jsx)("a",{onClick:Y?()=>{W(!0)}:()=>{},className:(0,I.cn)("flex items-center justify-center w-10 h-10 right-3 bottom-14 z-50 rounded-full bg-[#000]/50 duration-200 backdrop-blur-sm",Y?"opacity-100 cursor-pointer hover:bg-[#000]/75":"opacity-25"),children:(0,n.jsx)(X.a,{className:"fill-secondary w-8 h-8 m-auto"})}),(0,n.jsx)("button",{onClick:()=>{Q||L("Fullscreen mode"),V(e=>!e)},className:"flex items-center justify-center w-10 h-10 rounded-full bg-[#000]/50 hover:bg-[#000]/75 duration-200 backdrop-blur-sm",children:Q?(0,n.jsx)(ee.b,{}):(0,n.jsx)(q.p,{className:"fill-secondary w-8 h-8 m-auto"})})]})]}),(0,n.jsx)(eF,{hidden:Q}),(0,n.jsxs)(z.Z.Provider,{hidden:Q,children:[(0,n.jsx)(z.Z.Item,{active:u,label:"Tops",value:y.F.TOP,onSelect:h}),(0,n.jsx)(z.Z.Item,{active:u,label:"Bottoms",value:y.F.BOTTOM,onSelect:h}),(0,n.jsx)(z.Z.Item,{active:u,label:"Full Body",value:y.F.FULL,onSelect:h})]}),(0,n.jsx)(U,{activeCategory:u,tasks:K,userData:_,hidden:Q}),(0,n.jsx)($,{visible:J,onClose:()=>W(!1)}),(0,n.jsx)(eS.Z,{visible:v,showCover:!1,onClose:()=>{b(!1)},onTryForFree:()=>{b(!1)}})]})]})}},9993:function(e,t,l){"use strict";l.d(t,{R:function(){return a}});var s=l(7437);function a(e){let{className:t}=e;return(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",children:(0,s.jsx)("g",{id:"Elipses_icon",children:(0,s.jsxs)("g",{id:"Vector",children:[(0,s.jsx)("path",{d:"M5.33317 7.99996C5.33317 8.73634 4.73622 9.33329 3.99984 9.33329C3.26346 9.33329 2.6665 8.73634 2.6665 7.99996C2.6665 7.26358 3.26346 6.66663 3.99984 6.66663C4.73622 6.66663 5.33317 7.26358 5.33317 7.99996Z"}),(0,s.jsx)("path",{d:"M9.33317 7.99996C9.33317 8.73634 8.73622 9.33329 7.99984 9.33329C7.26346 9.33329 6.6665 8.73634 6.6665 7.99996C6.6665 7.26358 7.26346 6.66663 7.99984 6.66663C8.73622 6.66663 9.33317 7.26358 9.33317 7.99996Z"}),(0,s.jsx)("path",{d:"M13.3332 7.99996C13.3332 8.73634 12.7362 9.33329 11.9998 9.33329C11.2635 9.33329 10.6665 8.73634 10.6665 7.99996C10.6665 7.26358 11.2635 6.66663 11.9998 6.66663C12.7362 6.66663 13.3332 7.26358 13.3332 7.99996Z"})]})})})}l(2265)},1912:function(e,t,l){"use strict";var s=l(7437);l(2265),t.Z=function(e){let{className:t}=e;return(0,s.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsxs)("g",{id:"Favorite-filled",clipPath:"url(#clip0_61_32)",children:[(0,s.jsx)("path",{id:"Vector",d:"M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z"}),(0,s.jsx)("path",{id:"Vector_2",d:"M16.5 3C14.76 3 13.09 3.81 12 5.09C10.91 3.81 9.24 3 7.5 3C4.42 3 2 5.42 2 8.5C2 12.28 5.4 15.36 10.55 20.04L12 21.35L13.45 20.03C18.6 15.36 22 12.28 22 8.5C22 5.42 19.58 3 16.5 3ZM12.1 18.55L12 18.65L11.9 18.55C7.14 14.24 4 11.39 4 8.5C4 6.5 5.5 5 7.5 5C9.04 5 11.47 6.63 12 8C12.52 6.63 14.96 5 16.5 5C18.5 5 20 6.5 20 8.5C20 11.39 16.86 14.24 12.1 18.55Z"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"clip0_61_32",children:(0,s.jsx)("rect",{width:"24",height:"24"})})})]})}},6321:function(e,t,l){"use strict";var s=l(7437),a=l(2265),n=l(5231);t.Z=e=>{let{visible:t,onClose:l,onSendCodeSuccess:i,onTryForFree:o,showCover:r=!0}=e,[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)("error"),[h,f]=(0,a.useState)(!1),{mutateAsync:x}=(0,n.Qg)(),g=async()=>{try{f(!0),await x(c,{onSuccess:async e=>{var t,s,a,n;if(null===(s=e.data)||void 0===s?void 0:null===(t=s.errors)||void 0===t?void 0:t.length){m(null===(n=e.data)||void 0===n?void 0:null===(a=n.errors)||void 0===a?void 0:a[0].msg);return}l(),i&&await i(),u&&m("")}})}catch(e){m("Invalid Code"),console.log(e)}finally{f(!1)}};return(0,s.jsxs)("div",{className:"".concat(t?"":"hidden"," h-full w-full flex flex-col flex-1 bottom-0 m-auto absolute z-50"),children:[r&&(0,s.jsx)("div",{className:"bg-black h-[50%]",children:(0,s.jsx)("img",{src:"/promo-code-frame.png",alt:"",className:"h-full w-full object-cover"})}),(0,s.jsxs)("div",{className:"h-[50%] w-full bg-[#6117FF] mt-auto flex flex-col items-center px-4 pt-10 pb-3 rounded-t-lg relative",children:[!r&&(0,s.jsx)("button",{onClick:l,className:"h-10 w-10 flex items-center justify-center absolute top-4 right-4",children:(0,s.jsx)("img",{src:"/icons/close.svg",alt:"",className:"w-6 h-6"})}),(0,s.jsx)("span",{className:"w-[300px] text-white text-center font-poppins text-[20px] font-bold pb-6",children:"Get unlimited try on credits with Stylar Premium"}),(0,s.jsx)("div",{className:"w-full h-12 bg-black/25 flex-col flex items-center justify-center rounded-lg ".concat(u?"border-2 border-[#FF2E00]":""),children:(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Enter Code",className:"bg-transparent w-full my-auto text-white h-full text-center text-lg font-inter"})}),(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2 pt-4",children:[(0,s.jsx)("button",{onClick:g,disabled:h||!c,className:"w-full h-12 disabled:opacity-50 bg-white rounded-full py-[6px] px-4 flex items-center justify-center text-[#6117FF] font-poppins text-lg font-semibold",children:h?(0,s.jsx)("svg",{className:"animate-spin m-auto",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#6117FF"})}):"Unlock Premium"}),(0,s.jsx)("button",{onClick:o,className:"w-full h-12 bg-transparent outline outline-2 outline-white rounded-full py-[6px] px-4 flex items-center justify-center text-white font-poppins text-lg font-semibold",children:"Try for free"})]})]})]})}},495:function(e,t,l){"use strict";l.d(t,{d:function(){return r},z:function(){return c}});var s=l(7437),a=l(2265),n=l(1538),i=l(2218),o=l(7440);let r=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:l,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(r({variant:a,size:i,className:l})),ref:t,...d})});c.displayName="Button"},6661:function(e,t,l){"use strict";l.d(t,{l0:function(){return u},NI:function(){return v},Wi:function(){return h},xJ:function(){return g},lX:function(){return p},zG:function(){return b}});var s=l(7437),a=l(2265),n=l(1538),i=l(9343),o=l(7440),r=l(8364);let c=(0,l(2218).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,s.jsx)(r.f,{ref:t,className:(0,o.cn)(c(),l),...a})});d.displayName=r.f.displayName;let u=i.RV,m=a.createContext({}),h=e=>{let{...t}=e;return(0,s.jsx)(m.Provider,{value:{name:t.name},children:(0,s.jsx)(i.Qr,{...t})})},f=()=>{let e=a.useContext(m),t=a.useContext(x),{getFieldState:l,formState:s}=(0,i.Gc)(),n=l(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=t;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...n}},x=a.createContext({}),g=a.forwardRef((e,t)=>{let{className:l,...n}=e,i=a.useId();return(0,s.jsx)(x.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",l),...n})})});g.displayName="FormItem";let p=a.forwardRef((e,t)=>{let{className:l,...a}=e,{error:n,formItemId:i}=f();return(0,s.jsx)(d,{ref:t,className:(0,o.cn)(n&&"text-destructive",l),htmlFor:i,...a})});p.displayName="FormLabel";let v=a.forwardRef((e,t)=>{let{...l}=e,{error:a,formItemId:i,formDescriptionId:o,formMessageId:r}=f();return(0,s.jsx)(n.g7,{ref:t,id:i,"aria-describedby":a?"".concat(o," ").concat(r):"".concat(o),"aria-invalid":!!a,...l})});v.displayName="FormControl",a.forwardRef((e,t)=>{let{className:l,...a}=e,{formDescriptionId:n}=f();return(0,s.jsx)("p",{ref:t,id:n,className:(0,o.cn)("text-[0.8rem] text-muted-foreground",l),...a})}).displayName="FormDescription";let b=a.forwardRef((e,t)=>{let{className:l,children:a,...n}=e,{error:i,formMessageId:r}=f(),c=i?String(null==i?void 0:i.message):a;return c?(0,s.jsx)("p",{ref:t,id:r,className:(0,o.cn)("text-[0.8rem] font-medium text-destructive",l),...n,children:c}):null});b.displayName="FormMessage"},9573:function(e,t,l){"use strict";l.d(t,{J2:function(){return o},xo:function(){return r},yk:function(){return c}});var s=l(7437),a=l(2265),n=l(9142),i=l(7440);let o=n.fC,r=n.xz;n.ee;let c=a.forwardRef((e,t)=>{let{className:l,align:a="center",sideOffset:o=4,...r}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsx)(n.VY,{ref:t,align:a,sideOffset:o,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l),...r})})});c.displayName=n.VY.displayName},7432:function(e,t,l){"use strict";l.d(t,{D:function(){return i},d:function(){return o}});var s=l(7437),a=l(2265);let n=(0,a.createContext)({}),i=e=>{let{children:t}=e,[l,i]=(0,a.useState)(!1),[o,r]=(0,a.useState)();return(0,s.jsx)(n.Provider,{value:{isModalOpen:l,openModal:e=>{r(e),i(!0)},closeModal:()=>{i(!1)},modalContent:o},children:t})},o=()=>(0,a.useContext)(n)},7352:function(e,t,l){"use strict";l.d(t,{Z:function(){return g}});var s=l(2265),a=l(1783),n=l(3191),i=l(7854),o=l(932),r=l(6298),c=l(8472);let d=()=>c.Z.create({baseURL:"https://restcountries.com/v3.1"}),u=()=>{let e=d();return{getCountries:()=>e.get("/all?fields=name,idd,flag")}},m=async()=>{let{getCountries:e}=u(),t=await e();return t.data?t.data:[]},h=()=>(0,o.a)({queryKey:["countries"],queryFn:m,placeholderData:r.Wk,structuralSharing:!1,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0});var f=l(5231),x=l(6530),g=()=>{let e=(0,n.NL)(),{mutateAsync:t}=(0,f.IG)(),{resetSelectedSegments:l}=(0,x.J)(),{data:o}=h(),{getUser:r,checkCredentials:c,sendCodeToPhone:d,updateUser:u,uploadUserImage:m,addPresetPhoto:g,sendCodeToEmail:p}=(0,i.p)(),[v,b]=(0,s.useState)(""),[w,y]=(0,s.useState)(""),[j,N]=(0,s.useState)({value:"+1",icon:"\uD83C\uDDFA\uD83C\uDDF8",label:"United States",cca2:"US"}),[k,C]=(0,s.useState)([]),[_,L]=(0,s.useState)(""),[F,I]=(0,s.useState)(""),[S,P]=(0,s.useState)(""),[E,R]=(0,s.useState)(a.Z.MALE),[U,z]=(0,s.useState)(),[A,D]=(0,s.useState)(""),Z=async e=>{y(e)},M=async()=>{try{if(o){let e=o.map(e=>({icon:e.flag,label:e.name.common,value:"".concat(e.idd.root).concat(1===e.idd.suffixes.length?e.idd.suffixes[0]:"")})).sort((e,t)=>e.label.localeCompare(t.label));C(e)}}catch(e){console.log(e)}},O=async(e,t)=>{try{await d("".concat(e).concat(t))}catch(e){console.log(e)}},T=async e=>{try{await p(e)}catch(e){console.log(e)}},K=async(e,t)=>{try{await u({userId:e,body:t})}catch(e){console.log(e)}},B=async(t,l)=>await new Promise((s,a)=>{let n=0,i=setInterval(async()=>{try{var o;let c=(await r()).data.user,d=(null===(o=c.tryOnPhotos)||void 0===o?void 0:o.length)||0;t.length<d&&(clearInterval(i),l&&(await e.refetchQueries({queryKey:["current-user"]}),await l()),await e.refetchQueries({queryKey:["current-user"]}),s(!0)),n>120&&(clearInterval(i),a())}catch(e){console.log(e)}n++},3e3)}),q=async(e,t,l,s)=>{try{await m({id:e,image:l}),await B(t,()=>{s&&s()})}catch(e){console.log(e)}},G=async(e,t)=>{try{let l=await g({id:e,url:t});return 200==l.status}catch(e){return console.log(e),!1}},Q=async e=>{let{code:t,email:l,phone:s,google:a}=e;try{let e=await c({code:t,phone:s,email:l,google:a});if(e.data.success)return b(""),window.parent.postMessage({id:"setStylarToken",content:{key:"@Stylar:access_token",value:e.data.token}},"*"),localStorage.setItem("@Stylar:access_token",e.data.token),e.data;throw b("❌ The verification code you have entered is incorrect. Please try again or tap the button below to resend."),Error()}catch(e){console.log(e)}},V=async(s,a)=>{try{await t({userId:s,tryOnPhotoId:a}),await e.refetchQueries({queryKey:["current-user"]}),await e.refetchQueries({queryKey:["user-segments"]}),l(a)}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{M()},[o]),{name:w,phone:_,genderPreference:E,photo:U,photoUrl:A,country:j,countries:k,codeError:v,email:F,emailError:S,handleCountry:e=>{N(e)},handleName:Z,handlePhone:e=>{L(e)},handleGenderPreference:e=>{R(e)},handlePhoto:e=>{z(e)},handlePhotoUrl:e=>{D(e)},sendPhoneCode:O,userLogin:Q,saveUser:K,handleUserPhoto:q,handleUserPhotoUrl:G,pollTryOnPhoto:B,handleEmail:e=>{I(e)},checkEmail:e=>!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||(P("Please enter a valid email address"),!1),sendEmailCode:T,handleActivatePhoto:V}}},7564:function(e,t,l){"use strict";var s,a;l.d(t,{h:function(){return s}}),(a=s||(s={})).FAILED="failed",a.STARTED="started",a.SUCCEEDED="succeeded",a.QUEUED="queued",a.REJECTED="rejected"},1783:function(e,t,l){"use strict";var s,a;l.d(t,{Z:function(){return s}}),(a=s||(s={}))[a.MALE=0]="MALE",a[a.FEMALE=1]="FEMALE"},6893:function(e,t,l){"use strict";l.d(t,{r:function(){return r}});var s=l(932),a=l(6298),n=l(459);let i=()=>{let e=(0,n.Z)();return{getUserTasks:()=>e.get("/task/"),getTask:t=>e.get("/task/".concat(t))}},o=async()=>{try{let{getUserTasks:e}=i(),t=await e();if(null==t?void 0:t.data)return[...t.data];return[]}catch(e){console.log(e)}},r=()=>(0,s.a)({queryKey:["user-tasks"],queryFn:()=>o(),placeholderData:a.Wk,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,structuralSharing:!1,refetchInterval:3e3})},4206:function(e,t,l){"use strict";l.d(t,{T:function(){return s}});let s=(e,t)=>{let l=new Date(t).getTime()-new Date(e).getTime(),s=Date.now()-new Date(e).getTime();return s/l*100>=100?100:s/l*100}}},function(e){e.O(0,[603,792,762,254,596,674,648,422,142,755,127,120,31,916,971,738,744],function(){return e(e.s=9964)}),_N_E=e.O()}]);