!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6eacdf20-3bbd-4908-958f-c82599b45188",e._sentryDebugIdIdentifier="sentry-dbid-6eacdf20-3bbd-4908-958f-c82599b45188")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{3751:function(e,t,n){Promise.resolve().then(n.bind(n,913))},913:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(7437),o=n(2265),s=e=>{let{onClick:t}=e;return(0,a.jsxs)("button",{onClick:t,className:"bg-black/80 hover:bg-[#6117FF] duration-200 ease-in-out h-6 w-[64px] px-[6px] gap-[2px] rounded-full flex items-center justify-center fixed \n      top-0 right-0",children:[(0,a.jsx)("img",{src:"/icons/magic.svg",alt:""}),(0,a.jsx)("span",{className:"text-[10px] text-white font-poppins font-semibold",children:"Try on"})]})},i=n(6530),r=n(803),l=n(5154),c=n(5231),d=()=>{let e=Object.values(r.F),{data:t}=(0,c.tZ)(),{startGeneration:n,rateLimited:d}=(0,i.J)(),{messageParent:u}=(0,l.Z)(),p=new BroadcastChannel("extension_broadcast"),[f,g]=(0,o.useState)(!1),[x,m]=(0,o.useState)({imageUrl:"",productName:"",productUrl:""}),[h,b]=(0,o.useState)(!1),w=e=>{var t;return e===r.F.FULL?"Full Body":"".concat(null===(t=e[0])||void 0===t?void 0:t.toUpperCase()).concat(e.slice(1),"s")},v=async e=>{if("receiveStylarToken"===e.data.id){let t=e.data.content;localStorage.setItem("@Stylar:access_token",t),window.location.reload()}if("renderSaveButton"===e.data.id){var t,n;(null===(t=e.data.content)||void 0===t?void 0:t.show)===!1&&g(!1),(null===(n=e.data.content)||void 0===n?void 0:n.productName)&&m(e.data.content)}},y=async e=>{try{b(!0),u({id:"startGeneration",content:{referenceImageURL:x.imageUrl}}),await n({referenceImageURL:x.imageUrl,section:e,productName:x.productName,productURL:x.productUrl}),g(!1);return}catch(e){console.log(e)}finally{b(!1)}},N=async()=>{var e;if((null==t?void 0:null===(e=t.user.account)||void 0===e?void 0:e.dailyUsage)===20){u({id:"toggleContent"}),p.postMessage("Credit limit exceeded");return}if(!localStorage.getItem("@Stylar:access_token")){u({id:"toggleContent"});return}window.parent.postMessage({id:"selectOptions",content:{}},"*"),g(!0)};return(0,o.useEffect)(()=>(window.addEventListener("message",v),()=>{window.removeEventListener("message",v)})),(0,o.useEffect)(()=>g(!1),[]),f?(0,a.jsx)("div",{className:"flex flex-col h-[136px] w-[176px] bg-black/80 py-2 pl-4 pr-[2px] rounded-lg gap-1 fixed top-0 right-0",children:h?(0,a.jsx)("svg",{className:"animate-spin m-auto",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",className:"spinner_P7sC",fill:"#fff"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-white text-[10px] font-poppins font-bold py-1",children:"Select item category:"}),(0,a.jsx)("ul",{className:"flex flex-col bg-white/5",children:e.map(e=>(0,a.jsx)("li",{onClick:()=>y(e),className:"h-8 flex items-center duration-200 ease-in-out cursor-pointer group ",children:(0,a.jsx)("span",{className:"text-white text-xs font-semibold font-poppins duration-200 opacity-25 group-hover:opacity-100 group-hover:border-b-2 group-hover:border-[#6117FF]",children:w(e)})},e))})]})}):d?(0,a.jsx)("button",{disabled:!0,className:"bg-gray-600/80 opacity-60 duration-200 ease-in-out h-6 w-[64px] gap-[2px] rounded-full flex items-center justify-center fixed \n      top-0 right-0",children:(0,a.jsx)("span",{className:"text-[9px] text-white font-poppins font-semibold",children:"5/5 Pending"})}):(0,a.jsx)(s,{onClick:N})}},5154:function(e,t){"use strict";t.Z=()=>({messageParent:e=>{let{id:t,content:n}=e;window.parent.postMessage({id:t,content:n},"*")}})}},function(e){e.O(0,[603,762,254,120,916,971,738,744],function(){return e(e.s=3751)}),_N_E=e.O()}]);