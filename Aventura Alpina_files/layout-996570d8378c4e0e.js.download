!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f611eb6f-950f-40f0-abea-2146c4905b1f",e._sentryDebugIdIdentifier="sentry-dbid-f611eb6f-950f-40f0-abea-2146c4905b1f")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3373:function(e,t,n){Promise.resolve().then(n.bind(n,7290)),Promise.resolve().then(n.bind(n,912)),Promise.resolve().then(n.bind(n,1481))},7290:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var o=n(7437),a=n(2265),l=n(6094),c=n(3191),i=n(2596),r=n(3582),s=n(8735),u=n(6530),d=n(5913);n(8877);var f=n(4869),h=n(6463),m=n(4937),p=n(7432),g=()=>{let{isModalOpen:e,closeModal:t,modalContent:n}=(0,p.d)(),a=(0,h.usePathname)();return"/picker-mode"!==a&&"/extension-actions"!==a&&e?(0,o.jsx)("div",{className:"fixed inset-0 m-auto bg-black/50 w-full h-full flex flex-col items-center justify-center z-[999]",children:(0,o.jsxs)("div",{className:"bg-[#151517]/90 max-w-[300px] w-full h-fit p-4 items-center justify-center rounded-2xl relative",children:[(0,o.jsx)("button",{onClick:t,className:"absolute top-4 right-4",children:(0,o.jsx)("img",{src:"/icons/close.svg",alt:""})}),n]})}):null};let b=!1;var v=e=>{let{children:t}=e,n=new l.S({defaultOptions:{queries:{gcTime:864e5}}}),v=(0,h.useRouter)(),{verifyToken:k}=(0,f.m)(),{identifyUser:x}=(0,m.N)(),y=async()=>{try{let e=await k();if(e.data.ok){let t=e.data.user;return x(t._id,t.name,t.email,t.phone),e.data.user}"/picker-mode"===location.pathname||"/extension-actions"===location.pathname||location.pathname.includes("/lookbook")||location.pathname.includes("/collection")||v.push("/login")}catch(e){"/picker-mode"===location.pathname||"/extension-actions"===location.pathname||location.pathname.includes("/lookbook")||location.pathname.includes("/collection")||v.push("/login"),console.log(e)}},w=e=>{if("receiveStylarToken"===e.data.id){let t=e.data.content,n=localStorage.getItem("@Stylar:access_token");null==t?localStorage.removeItem("@Stylar:access_token"):n!==t&&(localStorage.setItem("@Stylar:access_token",t),window.location.reload())}if("receiveActiveCollection"===e.data.id){let t=e.data.content;localStorage.setItem("@Stylar:active_collection",t.activeCollection)}};return(0,a.useEffect)(()=>{{window.addEventListener("message",w);let e=(0,r.K)({storage:window.localStorage});(0,i.wO)({queryClient:n,persister:e})}},[]),(0,a.useEffect)(()=>(b||y(),()=>{b=!0}),[]),(0,o.jsx)(a.Suspense,{children:(0,o.jsx)(s.rg,{clientId:"340057235849-pp6fl7ch43b3q7g118lpovqongfiv7q4.apps.googleusercontent.com",children:(0,o.jsx)(c.aH,{client:n,children:(0,o.jsx)(d.Y,{children:(0,o.jsx)(u.B,{children:(0,o.jsxs)(p.D,{children:[t,(0,o.jsx)(g,{})]})})})})})})}},7432:function(e,t,n){"use strict";n.d(t,{D:function(){return c},d:function(){return i}});var o=n(7437),a=n(2265);let l=(0,a.createContext)({}),c=e=>{let{children:t}=e,[n,c]=(0,a.useState)(!1),[i,r]=(0,a.useState)();return(0,o.jsx)(l.Provider,{value:{isModalOpen:n,openModal:e=>{r(e),c(!0)},closeModal:()=>{c(!1)},modalContent:i},children:t})},i=()=>(0,a.useContext)(l)},4869:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var o=n(459);let a=()=>{let e=(0,o.Z)();return{createMobileQRCode:()=>e.get("/auth/encrypt-auth"),checkMobileQRCode:t=>e.post("/auth/decrypt-auth",{token:t}),verifyToken:()=>{let t=localStorage.getItem("@Stylar:access_token");return e.get("/auth/verify-token",{headers:{Authorization:"Bearer ".concat(t)}})}}}},8877:function(){}},function(e){e.O(0,[404,603,762,254,739,120,916,971,738,744],function(){return e(e.s=3373)}),_N_E=e.O()}]);